(window.webpackJsonp=window.webpackJsonp||[]).push([[0],{197:function(e,t,n){var r={"./af":42,"./af.js":42,"./ar":43,"./ar-dz":44,"./ar-dz.js":44,"./ar-kw":45,"./ar-kw.js":45,"./ar-ly":46,"./ar-ly.js":46,"./ar-ma":47,"./ar-ma.js":47,"./ar-sa":48,"./ar-sa.js":48,"./ar-tn":49,"./ar-tn.js":49,"./ar.js":43,"./az":50,"./az.js":50,"./be":51,"./be.js":51,"./bg":52,"./bg.js":52,"./bm":53,"./bm.js":53,"./bn":54,"./bn.js":54,"./bo":55,"./bo.js":55,"./br":56,"./br.js":56,"./bs":57,"./bs.js":57,"./ca":58,"./ca.js":58,"./cs":59,"./cs.js":59,"./cv":60,"./cv.js":60,"./cy":61,"./cy.js":61,"./da":62,"./da.js":62,"./de":63,"./de-at":64,"./de-at.js":64,"./de-ch":65,"./de-ch.js":65,"./de.js":63,"./dv":66,"./dv.js":66,"./el":67,"./el.js":67,"./en-SG":68,"./en-SG.js":68,"./en-au":69,"./en-au.js":69,"./en-ca":70,"./en-ca.js":70,"./en-gb":71,"./en-gb.js":71,"./en-ie":72,"./en-ie.js":72,"./en-il":73,"./en-il.js":73,"./en-nz":74,"./en-nz.js":74,"./eo":75,"./eo.js":75,"./es":76,"./es-do":77,"./es-do.js":77,"./es-us":78,"./es-us.js":78,"./es.js":76,"./et":79,"./et.js":79,"./eu":80,"./eu.js":80,"./fa":81,"./fa.js":81,"./fi":82,"./fi.js":82,"./fo":83,"./fo.js":83,"./fr":84,"./fr-ca":85,"./fr-ca.js":85,"./fr-ch":86,"./fr-ch.js":86,"./fr.js":84,"./fy":87,"./fy.js":87,"./ga":88,"./ga.js":88,"./gd":89,"./gd.js":89,"./gl":90,"./gl.js":90,"./gom-latn":91,"./gom-latn.js":91,"./gu":92,"./gu.js":92,"./he":93,"./he.js":93,"./hi":94,"./hi.js":94,"./hr":95,"./hr.js":95,"./hu":96,"./hu.js":96,"./hy-am":97,"./hy-am.js":97,"./id":98,"./id.js":98,"./is":99,"./is.js":99,"./it":100,"./it-ch":101,"./it-ch.js":101,"./it.js":100,"./ja":102,"./ja.js":102,"./jv":103,"./jv.js":103,"./ka":104,"./ka.js":104,"./kk":105,"./kk.js":105,"./km":106,"./km.js":106,"./kn":107,"./kn.js":107,"./ko":108,"./ko.js":108,"./ku":109,"./ku.js":109,"./ky":110,"./ky.js":110,"./lb":111,"./lb.js":111,"./lo":112,"./lo.js":112,"./lt":113,"./lt.js":113,"./lv":114,"./lv.js":114,"./me":115,"./me.js":115,"./mi":116,"./mi.js":116,"./mk":117,"./mk.js":117,"./ml":118,"./ml.js":118,"./mn":119,"./mn.js":119,"./mr":120,"./mr.js":120,"./ms":121,"./ms-my":122,"./ms-my.js":122,"./ms.js":121,"./mt":123,"./mt.js":123,"./my":124,"./my.js":124,"./nb":125,"./nb.js":125,"./ne":126,"./ne.js":126,"./nl":127,"./nl-be":128,"./nl-be.js":128,"./nl.js":127,"./nn":129,"./nn.js":129,"./pa-in":130,"./pa-in.js":130,"./pl":131,"./pl.js":131,"./pt":132,"./pt-br":133,"./pt-br.js":133,"./pt.js":132,"./ro":134,"./ro.js":134,"./ru":135,"./ru.js":135,"./sd":136,"./sd.js":136,"./se":137,"./se.js":137,"./si":138,"./si.js":138,"./sk":139,"./sk.js":139,"./sl":140,"./sl.js":140,"./sq":141,"./sq.js":141,"./sr":142,"./sr-cyrl":143,"./sr-cyrl.js":143,"./sr.js":142,"./ss":144,"./ss.js":144,"./sv":145,"./sv.js":145,"./sw":146,"./sw.js":146,"./ta":147,"./ta.js":147,"./te":148,"./te.js":148,"./tet":149,"./tet.js":149,"./tg":150,"./tg.js":150,"./th":151,"./th.js":151,"./tl-ph":152,"./tl-ph.js":152,"./tlh":153,"./tlh.js":153,"./tr":154,"./tr.js":154,"./tzl":155,"./tzl.js":155,"./tzm":156,"./tzm-latn":157,"./tzm-latn.js":157,"./tzm.js":156,"./ug-cn":158,"./ug-cn.js":158,"./uk":159,"./uk.js":159,"./ur":160,"./ur.js":160,"./uz":161,"./uz-latn":162,"./uz-latn.js":162,"./uz.js":161,"./vi":163,"./vi.js":163,"./x-pseudo":164,"./x-pseudo.js":164,"./yo":165,"./yo.js":165,"./zh-cn":166,"./zh-cn.js":166,"./zh-hk":167,"./zh-hk.js":167,"./zh-tw":168,"./zh-tw.js":168};function a(e){var t=i(e);return n(t)}function i(e){if(!n.o(r,e)){var t=new Error("Cannot find module '"+e+"'");throw t.code="MODULE_NOT_FOUND",t}return r[e]}a.keys=function(){return Object.keys(r)},a.resolve=i,e.exports=a,a.id=197},209:function(e,t,n){"use strict";n.r(t);var r,a=n(32),i=n.n(a),o=n(0),s=n.n(o),c=n(171),l=n.n(c),u=n(22),m=n(184),d=n(9),p=n(186),f=n(7),y=n(37),g=n.n(y),h=n(172),v=n.n(h),k=n(19),b=n.n(k),j=n(20),w=n.n(j),x=n(173),E=n.n(x),S=n(174),O=n.n(S),C=n(14),L=n.n(C),P=n(175),M=n.n(P),I=n(5),G=n.n(I),A=n(2),T=n.n(A),N=n(30),_=n.n(N),D=n(187),z=n(212),B=n(27),V=n.n(B),R=n(15),K=n.n(R),H=n(176),U=n.n(H),F=n(28),Y=0,W=1,q=["white","black"],X="king",J="rook",$=(r={},G()(r,"queen",9),G()(r,J,5),G()(r,"knight",3),G()(r,"bishop",3),G()(r,"pawn",1),r),Q=[J,"knight","bishop"],Z=[].concat(Q,["queen"]),ee=[X].concat(K()(Q.reverse())),te=1,ne=50;function re(){return"undefined"!=typeof Worker}function ae(){return{name:F.b,version:F.d,repository:F.c.url,author:F.a}}var ie=n(29),oe=n.n(ie);function se(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function ce(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?se(Object(n),!0).forEach((function(t){G()(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):se(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}var le=null,ue=new(function(){function e(){if(b()(this,e),le)return le}return w()(e,[{key:"init",value:function(e){var t=this,n=e.eventHandler,r=void 0===n?function(){}:n,a=e.debugLevel,i=void 0===a?1:a;return this.debugLevel=i,this.eventHandler=r,this.worker=new Worker("stockfish.js"),this.worker.onmessage=function(e){var n=e.data;return t.onMessage(n)},this.sendRawCommand("uci"),this.sendRawCommand("isready"),this.depth=14,this.options=[],le=this}},{key:"startGame",value:function(){this.sendRawCommand("ucinewgame"),this.sendRawCommand("isready")}},{key:"sendRawCommand",value:function(e){this.worker.postMessage(e)}},{key:"onMessage",value:function(t){switch(t){default:if(!t)return;var n=e.responseParser(t);if(e.isIgnoredMessage(n))return;if("STOCKFISH_GET_OPTION"===n.event){n.event;var r=V()(n,["event"]);this.options=[].concat(K()(this.options),[ce({},r)])}return void this.emitEvent(n);case"uciok":return this.options=e.sortOptions(this.options),void this.emitEvent({event:"STOCKFISH_INIT",debugLevel:1});case"readyok":return void this.emitEvent({event:"STOCKFISH_READY",debugLevel:1})}}},{key:"emitEvent",value:function(e){var t=e.debugLevel,n=V()(e,["debugLevel"]);Number(t||0)>=this.debugLevel&&("STOCKFISH_UNKNOWN"===n.event?console.error(n):console.log(n)),this.eventHandler(n)}},{key:"computeNextMove",value:function(e,t){this.sendRawCommand("position ".concat(t||"startpos"," moves ").concat(e)),this.sendRawCommand("go depth ".concat(this.depth))}},{key:"setOption",value:function(e){var t=e.name,n=e.value;"Depth"===t?this.depth=n:this.sendRawCommand("setoption name ".concat(t," value ").concat(String(n)))}},{key:"fullOptions",get:function(){return[{name:"Depth",value:this.depth,type:"spin",min:te,max:ne}].concat(K()(this.options))}}],[{key:"isIgnoredMessage",value:function(e){return"Stockfish"===e.firstWord||("Debug Log File"===e.name||("Threads"===e.name||("Hash"===e.name||("nodestime"===e.name||"Move Overhead"===e.name))))}},{key:"responseParser",value:function(e){var t,n=e.split(" "),r=oe()(n),a=r[0],i=r[1],o=r.slice(2);if("id"===a)return t={event:"STOCKFISH_ENGINE"},G()(t,i,o.join(" ")),G()(t,"debugLevel",0),t;if("option"===a&&"name"===i){for(var s="",c=0,l=o[c];"type"!==l;)s+=l+" ",l=o[++c];s=s.substring(0,s.length-1);var u=o.slice(c+1,o.length),m=oe()(u),d=m[0],p=m.slice(1),f=null,y={},g=[];if(p.length){var h=p[1];switch(d){default:break;case"string":f=h;break;case"check":f=Boolean(h);break;case"spin":f=Number(h);break;case"combo":f=h}var v=p.slice(2,p.length);if("spin"===d&&(y={min:Number(v[1]),max:Number(v[3])}),"combo"===d)for(var k=oe()(p),b=(k[0],k[1],k.slice(2)),j=0,w=b[j];"var"===w;)g.push(b[j+1]),w=b[j+=2]}return ce({event:"STOCKFISH_GET_OPTION",name:s,type:d},null!==f&&{value:f},{},y,{},g.length>0&&{select:g},{debugLevel:0})}if("info"===a&&"depth"===i){var x=oe()(o),E=x[0],S=x.slice(1);return{event:"STOCKFISH_GET_DEPTH",depth:Number(E),analysis:S,debugLevel:0}}return"bestmove"===a?{event:"STOCKFISH_MOVE",move:i,debugLevel:1}:{event:"STOCKFISH_UNKNOWN",firstWord:a,message:e,debugLevel:10}}},{key:"sortOptions",value:function(e){return e.sort((function(e,t){return"Skill Level"===e.name?-1:"Skill Level"===t.name?1:"button"!==e.type&&"button"===t.type?-1:"button"===e.type&&"button"!==t.type?1:"check"!==e.type&&"check"===t.type?-1:"check"===e.type&&"check"!==t.type?1:0}))}}]),e}());function me(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function de(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?me(Object(n),!0).forEach((function(t){G()(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):me(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}var pe=function(){function e(){b()(this,e),this.fenString="",this.pureAlgebraicNotation="",this.moves=[],this.movesAlgebraicNotation=[]}return w()(e,[{key:"parseMoveToPureAlgebraicNotation",value:function(e){var t=e.from,n=e.to,r=String.fromCharCode(97+t.x),a=8-t.y,i=String.fromCharCode(97+n.x),o=8-n.y,s="".concat(r).concat(a).concat(i).concat(o);return this.pureAlgebraicNotation?" ".concat(s):s}},{key:"parsePureAlgebraicNotationToMove",value:function(e){return{from:{x:e[0].charCodeAt()-97,y:Number(8-e[1])},to:{x:e[2].charCodeAt()-97,y:Number(8-e[3])}}}},{key:"addEntry",value:function(e){var t=Object(z.a)(),n=e.from,r=e.to,a=e.player,i=e.piece,o=e.endGame;this.moves=[].concat(K()(this.moves),[de({id:t},e)]);var s=this.parseMoveToPureAlgebraicNotation({from:n,to:r});this.movesAlgebraicNotation=[].concat(K()(this.movesAlgebraicNotation),[de({id:t,string:s,player:a,piece:i},o&&{endGame:o})]),this.pureAlgebraicNotation+=s}}]),e}();function fe(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}var ye=function(){function e(t){var n=t.id,r=t.type,a=t.x,i=t.y,o=t.player,s=t.firstMove;b()(this,e),this.id=n,this.type=r,this.x=a,this.y=i,this.player=o,this.firstMove=s}return w()(e,[{key:"debug",get:function(){return function(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?fe(Object(n),!0).forEach((function(t){G()(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):fe(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}({},this,{playerColor:q[this.player],xColumn:["a","b","c","d","e","f","g","h"][this.x],yRow:7-this.y+1})}},{key:"value",get:function(){return $[this.type]||0}},{key:"canCastlePrerequisites",get:function(){return this.firstMove&&[X,J].includes(this.type)}}]),e}();function ge(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function he(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?ge(Object(n),!0).forEach((function(t){G()(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):ge(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}U()(T.a);var ve="localhost"===location.hostname,ke=function(){function e(){var t=this;b()(this,e),G()(this,"practice",!1),G()(this,"newGame",(function(e){e&&(t.id=e);var n=[];[Y,W].forEach((function(e){[].concat(K()(Z),K()(ee)).forEach((function(t,r){var a=new ye({id:Object(z.a)(),x:r,y:e?0:7,player:e,type:t,firstMove:t===J||t===X||void 0}),i=new ye({id:Object(z.a)(),x:r,y:e?1:6,player:e,type:"pawn",firstMove:!0});n.push(i),n.push(a)}))})),t.pieces=n,re()&&t.artificialIntelligence.startGame()})),G()(this,"export",(function(){var e=ae().version;return JSON.stringify({gameVersion:e,gameId:t.gameId,gameSavedAt:T()(),gameStartedAt:t.gameStartedAt,gameEndedAt:t.gameEndedAt,totalTimePlayed:t.totalTimePlayed,players:t.players,currentTurn:t.currentTurn,pieces:t.pieces,removedPieces:t.removedPieces,moves:t.moves})})),G()(this,"import",(function(e){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},r=n.resumeGame,a=void 0!==r&&r,i=n.allowNoKing,o=void 0!==i&&i,s=n.noConsoleOutput,c=void 0!==s&&s,l=null;try{l=JSON.parse(e)}catch(t){l=e}if(l){t.gameVersion=l.gameVersion,t.gameId=l.gameId,t.gameStatus=l.gameStatus,t.gameStartedAt=T()(l.gameStartedAt),t.gameEndedAt=l.gameEndedAt?T()(l.gameEndedAt):null,t.lastSessionTimeUpdate=null,t.totalTimePlayed=T.a.duration(l.totalTimePlayed,"milliseconds"),t.currentTurn=l.currentTurn,t.pieces=l.pieces.map((function(e){return new ye(e)})),t.removedPieces=l.removedPieces,t.moves=l.moves&&l.moves,t.players=l.players,t.allowNoKing=o,c||console.log("Loading game '".concat(t.gameId,"' (game version: ").concat(t.gameVersion,"). Turn: ").concat(t.currentTurn,". Time played: ").concat(t.totalTimePlayed.format("hh:mm:ss",{trim:!1}),". Last saved on ").concat(l.gameSavedAt,".")),a&&t.resume();var u=t.isGameEnd({player:t.currentPlayer===Y?W:Y});u&&(t.gameStatus=u,t.gameEndedAt=T()())}else console.warn("Import data is empty.")})),G()(this,"updateTimePlayed",(function(){if(!t.gameEndedAt&&t.lastSessionTimeUpdate){var e=T.a.duration(T()().diff(t.lastSessionTimeUpdate),"milliseconds");t.lastSessionTimeUpdate=T()(),t.totalTimePlayed=t.totalTimePlayed.add(e)}})),G()(this,"pause",(function(){t.lastSessionTimeUpdate=null})),G()(this,"resume",(function(){t.lastSessionTimeUpdate=T()(),t.startArtificialIntelligenceTurn()})),G()(this,"nextTurn",(function(){ve&&t.practice?t.currentTurn+=2:t.currentTurn+=1,setTimeout((function(){t.unselect()}),1e3),t.startArtificialIntelligenceTurn()})),G()(this,"recordMove",(function(e){var n=he({},e,{player:t.currentPlayer});t.gameLog.addEntry(n)})),G()(this,"getFirstPiece",(function(e){var n=e.type,r=e.player;return t.pieces.find((function(e){return e.type===n&&e.player===r}))})),G()(this,"getPieceAt",(function(e){var n=e.x,r=e.y;return t.pieces.find((function(e){return e.x===n&&e.y===r}))})),G()(this,"hasPieceAt",(function(e){var n=e.x,r=e.y;return t.pieces.some((function(e){return e.x===n&&e.y===r}))})),G()(this,"removePiece",(function(e){var n=[];t.pieces.forEach((function(t){t.id!==e.id&&n.push(t)})),t.pieces=n;var r=t.removedPieces[e.player],a=[].concat(K()(r),[e]),i=t.removedPieces[Number(!e.player)];0===e.player?t.removedPieces=[a,i]:t.removedPieces=[i,a]})),G()(this,"select",(function(e){var n=e.x,r=e.y,a=!1;if(t.gameEndedAt||!t.lastSessionTimeUpdate)return a;var i=t.getPieceAt({x:n,y:r});if(i){i.x,i.y;var o=V()(i,["x","y"]);t.selected={x:n,y:r,piece:o},a=!0}else t.selected={x:n,y:r};return a})),G()(this,"unselect",(function(){t.selected=null})),G()(this,"isSelectedSquare",(function(e){var n=e.x,r=e.y;return!!t.selected&&(t.selected.x===n&&t.selected.y===r)})),G()(this,"isPawnCapturing",(function(e){var n=e.x,r=e.y,a=e.vectorX;return e.vectorY===e.direction&&(1===a||-1===a)&&t.hasPieceAt({x:n,y:r})})),G()(this,"isPawnMoving",(function(e){var n=e.x,r=e.y,a=e.vectorX,i=e.vectorY,o=e.firstMove,s=e.direction;return!t.hasPieceAt({x:n,y:r})&&(1===s?i>0&&i<=1+o&&0===a:i<0&&i>=-1-o&&0===a)})),G()(this,"isBishopPattern",(function(e){var t=e.vectorX,n=e.vectorY;return Math.abs(t)===Math.abs(n)})),G()(this,"isBishopMoveFree",(function(e){var n=e.origin,r=e.destination,a=e.vector;return!t.pieces.some((function(e){if(e.id===n.id)return!1;var t={x:e.x-n.x,y:e.y-n.y};if(Math.abs(t.x)===Math.abs(t.y)){var i=!1,o=!1;return i=a.x>0?e.x<r.x&&e.x>n.x:e.x>r.x&&e.x<n.x,o=a.y>0?e.y<r.y&&e.y>n.y:e.y>r.y&&e.y<n.y,i&&o}return!1}))})),G()(this,"isRookPattern",(function(e){var t=e.vectorX,n=e.vectorY;return 0===t&&0!==n||0!==t&&0===n})),G()(this,"isRookMoveFree",(function(e){var n=e.origin,r=e.vector,a=r.x?"y":"x",i=r.x?"x":"y",o=n[a],s=n[i]+r[i];return!t.pieces.some((function(e){return e[a]===o&&e.id!==n.id&&(r[i]>0&&e[i]>n[i]&&e[i]<s||r[i]<0&&e[i]<n[i]&&e[i]>s)}))})),G()(this,"isKingPattern",(function(e){var t=e.vectorX,n=e.vectorY;return t>=-1&&t<=1&&n>=-1&&n<=1})),G()(this,"isCastlePattern",(function(e){var t=e.vectorX,n=e.vectorY;return 2===Math.abs(t)&&0===n})),G()(this,"performCastle",(function(e){var n=e.castleVectorX,r=e.selectedPiece,a=e.destination,i=e.from,o=t.currentPlayer===Y?7:0,s=n>0?7:0,c=n>0?-1:1,l=t.pieces.find((function(e){return e.type===J&&e.player===r.player&&e.firstMove&&e.x===s}));return!!l&&(!(n>0?[5,6]:[1,2,3]).map((function(e){return t.hasPieceAt({x:e,y:o})||t.isKingInCheck({x:e,y:o})})).some((function(e){return e}))&&(t.pieces=t.pieces.map((function(e){return e.id===r.id?new ye(he({},r,{x:a.x,y:a.y,firstMove:!1})):e.id===l.id?new ye(he({},l,{x:a.x+c,firstMove:!1})):e})),t.recordMove({piece:{id:r.id,type:r.type},from:i,to:a}),t.nextTurn(),!0))})),G()(this,"isPiecePattern",(function(e){var n=e.destination,r=n.x,a=n.y,i=e.origin,o=e.type,s=e.player,c=e.firstMove,l=r-i.x,u=a-i.y;switch(o){default:break;case X:return t.isKingPattern({vectorX:l,vectorY:u});case"queen":return t.isBishopPattern({vectorX:l,vectorY:u})&&t.isBishopMoveFree({origin:i,destination:{x:r,y:a},vector:{x:l,y:u}})||t.isRookPattern({vectorX:l,vectorY:u})&&t.isRookMoveFree({origin:i,vector:{x:l,y:u}});case J:return t.isRookPattern({vectorX:l,vectorY:u})&&t.isRookMoveFree({origin:i,vector:{x:l,y:u}});case"knight":if(2===Math.abs(l)&&1===Math.abs(u)||1===Math.abs(l)&&2===Math.abs(u))return!0;break;case"bishop":return t.isBishopPattern({vectorX:l,vectorY:u})&&t.isBishopMoveFree({origin:i,destination:{x:r,y:a},vector:{x:l,y:u}});case"pawn":var m=s===Y?-1:1;return t.isPawnMoving({x:r,y:a,vectorX:l,vectorY:u,firstMove:c,direction:m})||t.isPawnCapturing({x:r,y:a,vectorX:l,vectorY:u,direction:m})}return!1})),G()(this,"isKingInCheck",(function(e){if(t.allowNoKing)return!1;var n=null,r=t.pieces.filter((function(e){return e.type===X&&e.player===t.currentPlayer&&(n=he({},e)),e.player!==t.currentPlayer})),a=e||n;return a?r.some((function(e){return t.isPiecePattern({destination:{x:a.x,y:a.y},origin:{x:e.x,y:e.y,id:e.id},type:e.type,player:e.player,firstMove:!1})})):(console.error("King not found?!"),!1)})),G()(this,"isGameEnd",(function(e){var n=e.player,r=void 0===n?t.currentPlayer:n;if(t.allowNoKing)return!1;var a=null,i=[],o=t.pieces.filter((function(e){return e.type===X&&e.player!==r&&(a=he({},e)),e.player===r||(i.push(e),!1)}));if(!a)return console.error("Opponent king not found?!"),!1;for(var s=9,c=!0,l=[],u=-1;u<=1;u++)for(var m=function(e){var n={x:a.x+u,y:a.y+e};if(n.x<0||n.y<0||n.x>7||n.y>7)return s--,"continue";var r=o.some((function(e){return t.isPiecePattern({destination:n,origin:{x:e.x,y:e.y,id:e.id},type:e.type,player:e.player,firstMove:!1})}));l.push(r),0===u&&0===e&&(c=!r)},d=-1;d<=1;d++)m(d);var p=l.reduce((function(e,t){return e+Number(t)}));return p===s?"checkmate":!(!c||p!==s-1)&&"draw"})),G()(this,"isLegalMove",(function(e){var n=e.destination,r=e.origin,a=e.type,i=e.player,o=e.firstMove;return t.isPiecePattern({destination:n,origin:r,type:a,player:i,firstMove:o})})),G()(this,"moveSelectedPiece",(function(e){var n=e.x,r=e.y,a=!1;if(t.gameEndedAt||!t.lastSessionTimeUpdate)return a;var i=null,o=null;if(!t.selected)return a;var s=t.selected,c=s.x,l=s.y,u=s.piece;if(!u)return t.select({x:n,y:r}),a;var m=[].concat(t.pieces),d=[].concat(t.removedPieces);if(t.pieces=t.pieces.map((function(e){if(e.x===c&&e.y===l&&e.id===u.id){if(t.isLegalMove({origin:{x:e.x,y:e.y,id:e.id},destination:{x:n,y:r},type:u.type,player:u.player,firstMove:u.firstMove})){var s=t.getPieceAt({x:n,y:r});if(s){if(u.player!==t.currentPlayer||s.player===u.player)return e;i=s}else if(u.player!==t.currentPlayer)return e;return a=!0,t.select({x:n,y:r,piece:he({},e,{firstMove:!1})}),new ye(he({},e,{x:n,y:r,firstMove:!1}))}if(e.canCastlePrerequisites){var m=n-e.x,d=r-e.y;t.isCastlePattern({vectorX:m,vectorY:d})&&(o=m)}return t.select({x:n,y:r}),e}return e})),i&&t.removePiece(i),t.isKingInCheck())return t.pieces=m,t.removedPieces=d,a=!1;var p=t.isGameEnd({});return p?(t.gameStatus=p,t.recordMove({piece:{id:u.id,type:u.type},from:{x:c,y:l},to:{x:n,y:r},endGame:p}),"draw"===p&&t.nextTurn(),t.gameEndedAt=T()(),a):o?t.performCastle({castleVectorX:o,selectedPiece:u,destination:{x:n,y:r},from:{x:c,y:l}}):(a&&(t.recordMove({piece:{id:u.id,type:u.type},from:{x:c,y:l},to:{x:n,y:r}}),t.nextTurn()),a)})),G()(this,"startArtificialIntelligenceTurn",(function(){if(re()&&"AI"===t.currentPlayerObject.control){var e=t.artificialIntelligenceStatus,n=e.initialized,r=e.gameReady;e.ready;n&&r&&setTimeout((function(){t.artificialIntelligence.computeNextMove(t.gameLog.pureAlgebraicNotation)}),1e3)}})),G()(this,"handleArtificialIntelligenceEvent",(function(e){var n=t.artificialIntelligenceStatus,r=n.initialized,a=n.gameReady;n.ready;switch(e.event){default:break;case"STOCKFISH_INIT":t.artificialIntelligenceStatus.initialized=!0;break;case"STOCKFISH_READY":r&&!a?t.artificialIntelligenceStatus.gameReady=!0:a&&t.startArtificialIntelligenceTurn();break;case"STOCKFISH_MOVE":var i=t.gameLog.parsePureAlgebraicNotationToMove(e.move),o=i.from,s=i.to;t.select({x:o.x,y:o.y}),t.moveSelectedPiece({x:s.x,y:s.y})}})),this.gameId=Object(z.a)(),this.gameStatus="ongoing",this.gameStartedAt=T()(),this.gameEndedAt=null,this.lastSessionTimeUpdate=T()(),this.totalTimePlayed=T.a.duration(T()().diff(T()()),"milliseconds"),this.currentTurn=0,this.pieces=[],this.removedPieces=[[],[]];var n=re();this.players=[{playerId:Object(z.a)(),color:Y,control:"Human"},{playerId:Object(z.a)(),color:W,control:n?"AI":"Human"}],this.allowNoKing=!1,this.gameLog=new pe,this.artificialIntelligenceStatus={initialized:!1,gameReady:!1,ready:!1},n&&(this.artificialIntelligence=ue.init({eventHandler:this.handleArtificialIntelligenceEvent}))}return w()(e,[{key:"setArtificialIntelligenceOption",value:function(e){return this.artificialIntelligence.setOption(e)}},{key:"togglePlayerControl",value:function(e){var t=this.players[e],n=t.control;switch(t.control){case"Human":if(!re())return;n="AI";break;case"AI":n="Human"}this.players[e].control=n}},{key:"currentPlayer",get:function(){return this.currentTurn%2==0?Y:W}},{key:"currentPlayerObject",get:function(){return this.players[this.currentPlayer]}},{key:"log",get:function(){return this.gameLog.movesAlgebraicNotation}},{key:"aiOptions",get:function(){return this.artificialIntelligence.fullOptions}}]),e}(),be={pawn:function(e){var t=e.color1;e.color2;return s.a.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",version:"1.1",viewBox:"0 0 45 45"},s.a.createElement("path",{d:"M 22,9 C 19.79,9 18,10.79 18,13 C 18,13.89 18.29,14.71 18.78,15.38 C 16.83,16.5 15.5,18.59 15.5,21 C 15.5,23.03 16.44,24.84 17.91,26.03 C 14.91,27.09 10.5,31.58 10.5,39.5 L 33.5,39.5 C 33.5,31.58 29.09,27.09 26.09,26.03 C 27.56,24.84 28.5,23.03 28.5,21 C 28.5,18.59 27.17,16.5 25.22,15.38 C 25.71,14.71 26,13.89 26,13 C 26,10.79 24.21,9 22,9 z ",style:{opacity:1,fill:t,fillOpacity:1,fillRule:"nonzero",stroke:"#000000",strokeWidth:1.5,strokeLinecap:"round",strokeLinejoin:"miter",strokeMiterlimit:4,strokeDasharray:"none",strokeOpacity:1}}))},bishop:function(e){var t=e.color1,n=e.color2;return s.a.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",version:"1.1",viewBox:"0 0 45 45"},s.a.createElement("g",{style:{opacity:1,fill:"none",fillRule:"evenodd",fillOpacity:1,stroke:"#000000",strokeWidth:1.5,strokeLinecap:"round",strokeLinejoin:"round",strokeMiterlimit:4,strokeDasharray:"none",strokeOpacity:1}},s.a.createElement("g",{style:{fill:t,stroke:"#000000",strokeLinecap:"butt"}},s.a.createElement("path",{d:"M 9,36 C 12.39,35.03 19.11,36.43 22.5,34 C 25.89,36.43 32.61,35.03 36,36 C 36,36 37.65,36.54 39,38 C 38.32,38.97 37.35,38.99 36,38.5 C 32.61,37.53 25.89,38.96 22.5,37.5 C 19.11,38.96 12.39,37.53 9,38.5 C 7.646,38.99 6.677,38.97 6,38 C 7.354,36.06 9,36 9,36 z"}),s.a.createElement("path",{d:"M 15,32 C 17.5,34.5 27.5,34.5 30,32 C 30.5,30.5 30,30 30,30 C 30,27.5 27.5,26 27.5,26 C 33,24.5 33.5,14.5 22.5,10.5 C 11.5,14.5 12,24.5 17.5,26 C 17.5,26 15,27.5 15,30 C 15,30 14.5,30.5 15,32 z"}),s.a.createElement("path",{d:"M 25 8 A 2.5 2.5 0 1 1  20,8 A 2.5 2.5 0 1 1  25 8 z"})),s.a.createElement("path",{d:"M 17.5,26 L 27.5,26 M 15,30 L 30,30 M 22.5,15.5 L 22.5,20.5 M 20,18 L 25,18",style:{fill:"none",stroke:n,strokeLinejoin:"miter"}})))},knight:function(e){var t=e.color1,n=e.color2;return s.a.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",version:"1.1",viewBox:"0 0 45 45"},s.a.createElement("g",{style:{fill:t,fillRule:"evenodd",strokeWidth:1.5,strokeLinecap:"round",strokeLinejoin:"round",strokeMiterlimit:4,strokeDasharray:"none"}},s.a.createElement("path",{d:"M 22,10 C 32.5,11 38.5,18 38,39 L 15,39 C 15,30 25,32.5 23,18",style:{fill:t,stroke:"black"===t?t:n}}),s.a.createElement("path",{d:"M 24,18 C 24.38,20.91 18.45,25.37 16,27 C 13,29 13.18,31.34 11,31 C 9.958,30.06 12.41,27.96 11,28 C 10,28 11.19,29.23 10,30 C 9,30 5.997,31 6,26 C 6,24 12,14 12,14 C 12,14 13.89,12.1 14,10.5 C 13.27,9.506 13.5,8.5 13.5,7.5 C 14.5,6.5 16.5,10 16.5,10 L 18.5,10 C 18.5,10 19.28,8.008 21,7 C 22,7 22,10 22,10",style:{fill:t,stroke:"black"===t?t:n}}),s.a.createElement("path",{d:"M 9.5 25.5 A 0.5 0.5 0 1 1 8.5,25.5 A 0.5 0.5 0 1 1 9.5 25.5 z",style:{fill:t,stroke:n}}),s.a.createElement("path",{d:"M 15 15.5 A 0.5 1.5 0 1 1  14,15.5 A 0.5 1.5 0 1 1  15 15.5 z",transform:"matrix(0.866,0.5,-0.5,0.866,9.693,-5.173)",style:{fill:t,stroke:n}}),s.a.createElement("path",{d:"M 24.55,10.4 L 24.1,11.85 L 24.6,12 C 27.75,13 30.25,14.49 32.5,18.75 C 34.75,23.01 35.75,29.06 35.25,39 L 35.2,39.5 L 37.45,39.5 L 37.5,39 C 38,28.94 36.62,22.15 34.25,17.66 C 31.88,13.17 28.46,11.02 25.06,10.5 L 24.55,10.4 z ",style:{fill:n,stroke:"black"===t?t:n,strokeWidth:.5}})))},rook:function(e){var t=e.color1,n=e.color2;return s.a.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",version:"1.1",viewBox:"0 0 45 45"},s.a.createElement("g",{style:{fill:t,stroke:"black"===t?t:n,fillRule:"evenodd",strokeWidth:1.5,strokeLinecap:"round",strokeLinejoin:"round",strokeMiterlimit:4,strokeDasharray:"none"}},s.a.createElement("path",{d:"M 9,39 L 36,39 L 36,36 L 9,36 L 9,39 z ",style:{strokeLinecap:"butt"}}),s.a.createElement("path",{d:"M 12.5,32 L 14,29.5 L 31,29.5 L 32.5,32 L 12.5,32 z ",style:{strokeLinecap:"butt"}}),s.a.createElement("path",{d:"M 12,36 L 12,32 L 33,32 L 33,36 L 12,36 z ",style:{strokeLinecap:"butt"}}),s.a.createElement("path",{d:"M 14,29.5 L 14,16.5 L 31,16.5 L 31,29.5 L 14,29.5 z ",style:{strokeLinecap:"butt",strokeLinejoin:"miter"}}),s.a.createElement("path",{d:"M 14,16.5 L 11,14 L 34,14 L 31,16.5 L 14,16.5 z ",style:{strokeLinecap:"butt"}}),s.a.createElement("path",{d:"M 11,14 L 11,9 L 15,9 L 15,11 L 20,11 L 20,9 L 25,9 L 25,11 L 30,11 L 30,9 L 34,9 L 34,14 L 11,14 z ",style:{strokeLinecap:"butt"}}),s.a.createElement("path",{d:"M 12,35.5 L 33,35.5 L 33,35.5",style:{fill:"none",stroke:n,strokeWidth:1,strokeLinejoin:"miter"}}),s.a.createElement("path",{d:"M 13,31.5 L 32,31.5",style:{fill:"none",stroke:n,strokeWidth:1,strokeLinejoin:"miter"}}),s.a.createElement("path",{d:"M 14,29.5 L 31,29.5",style:{fill:"none",stroke:n,strokeWidth:1,strokeLinejoin:"miter"}}),s.a.createElement("path",{d:"M 14,16.5 L 31,16.5",style:{fill:"none",stroke:n,strokeWidth:1,strokeLinejoin:"miter"}}),s.a.createElement("path",{d:"M 11,14 L 34,14",style:{fill:"none",stroke:n,strokeWidth:1,strokeLinejoin:"miter"}})))},king:function(e){var t=e.color1,n=e.color2;return s.a.createElement("svg",{xmlns:"http: //www.w3.org/2000/svg",version:"1.1",viewBox:"0 0 45 45"},s.a.createElement("g",{xmlns:"http: //www.w3.org/2000/svg",style:{fill:t,fillRule:"evenodd",strokeWidth:1.5,strokeLinecap:"round",strokeLinejoin:"round",strokeMiterlimit:4,strokeDasharray:"none"}},s.a.createElement("path",{d:"M 22.5,11.63 L 22.5,6",style:{fill:n,stroke:t,strokeLinecap:"miter",strokeWidth:1}}),s.a.createElement("path",{d:"M 20,8 L 25,8",style:{fill:t,stroke:t,strokeLinecap:"miter"}}),s.a.createElement("path",{d:"M 22.5,25 C 22.5,25 27,17.5 25.5,14.5 C 25.5,14.5 24.5,12 22.5,12 C 20.5,12 19.5,14.5 19.5,14.5 C 18,17.5 22.5,25 22.5,25",style:G()({fill:t,stroke:"black"===t?t:n,strokeLinecap:"butt"},"strokeLinecap","miter")}),s.a.createElement("path",{d:"M 11.5,37 C 17,40.5 27,40.5 32.5,37 L 32.5,30 C 32.5,30 41.5,25.5 38.5,19.5 C 34.5,13 25,16 22.5,23.5 L 22.5,27 L 22.5,23.5 C 19,16 9.5,13 6.5,19.5 C 3.5,25.5 11.5,29.5 11.5,29.5 L 11.5,37 z ",style:{fill:t,stroke:n}}),s.a.createElement("path",{d:"M 11.5,30 C 17,27 27,27 32.5,30",style:{fill:t,stroke:n}}),s.a.createElement("path",{d:"M 11.5,33.5 C 17,30.5 27,30.5 32.5,33.5",style:{fill:t,stroke:n}}),s.a.createElement("path",{d:"M 11.5,37 C 17,34 27,34 32.5,37",style:{fill:t,stroke:n}})))},queen:function(e){var t=e.color1,n=e.color2;return s.a.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",version:"1.1",viewBox:"0 0 45 45"},s.a.createElement("g",{style:{opacity:1,fill:t,fillOpacity:1,fillRule:"evenodd",stroke:t,strokeWidth:1.5,strokeLinecap:"round",strokeLinejoin:"round",strokeMiterlimit:4,strokeDasharray:"none",strokeOpacity:1}},s.a.createElement("g",{style:{fill:t,stroke:"black"===t?t:n}},s.a.createElement("circle",{cx:"6",cy:"12",r:"2.75"}),s.a.createElement("circle",{cx:"14",cy:"9",r:"2.75"}),s.a.createElement("circle",{cx:"22.5",cy:"8",r:"2.75"}),s.a.createElement("circle",{cx:"31",cy:"9",r:"2.75"}),s.a.createElement("circle",{cx:"39",cy:"12",r:"2.75"})),s.a.createElement("path",{d:"M 9,26 C 17.5,24.5 30,24.5 36,26 L 38.5,13.5 L 31,25 L 30.7,10.9 L 25.5,24.5 L 22.5,10 L 19.5,24.5 L 14.3,10.9 L 14,25 L 6.5,13.5 L 9,26 z",style:{strokeLinecap:"butt",stroke:"black"===t?t:n}}),s.a.createElement("path",{d:"M 9,26 C 9,28 10.5,28 11.5,30 C 12.5,31.5 12.5,31 12,33.5 C 10.5,34.5 10.5,36 10.5,36 C 9,37.5 11,38.5 11,38.5 C 17.5,39.5 27.5,39.5 34,38.5 C 34,38.5 35.5,37.5 34,36 C 34,36 34.5,34.5 33,33.5 C 32.5,31 32.5,31.5 33.5,30 C 34.5,28 36,28 36,26 C 27.5,24.5 17.5,24.5 9,26 z",style:{strokeLinecap:"butt",stroke:"black"===t||"black"===t?t:n}}),s.a.createElement("path",{d:"M 11,38.5 A 35,35 1 0 0 34,38.5",style:{file:t,stroke:t,strokeLinecap:"butt"}}),s.a.createElement("path",{d:"M 11,29 A 35,35 1 0 1 34,29",style:{file:t,stroke:n}}),s.a.createElement("path",{d:"M 12.5,31.5 L 32.5,31.5",style:{file:t,stroke:n}}),s.a.createElement("path",{d:"M 11.5,34.5 A 35,35 1 0 0 33.5,34.5",style:{file:t,stroke:n}}),s.a.createElement("path",{d:"M 10.5,37.5 A 35,35 1 0 0 34.5,37.5",style:{file:t,stroke:n}})))}};function je(){var e=i()(['\n        query getGame($expression: String) {\n            repository(name: "chess-db", owner: "yvesgurcan") {\n                object(expression: $expression) {\n                    ... on Blob {\n                        text\n                    }\n                }\n            }\n        }\n    ']);return je=function(){return e},e}function we(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function xe(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?we(Object(n),!0).forEach((function(t){G()(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):we(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}var Ee=function(e){function t(e){var n;b()(this,t),n=E()(this,O()(t).call(this,e)),G()(L()(n),"updateGameState",(function(e){n.setState({gameState:e})})),G()(L()(n),"handleSelect",(function(e){var t=e.x,r=e.y,a=n.state.gameState,i=a.selected;if(i)if(i.x===t&&i.y===r)a.unselect();else if(i.piece){a.moveSelectedPiece({x:t,y:r})||a.select({x:t,y:r})}else a.select({x:t,y:r});else a.select({x:t,y:r});window.gameState=a,n.updateGameState(a)})),G()(L()(n),"toggleSettingsMenu",(function(e){n.setState({settingsOpened:e,aiSettingsOpened:!1}),e?gameState.pause():gameState.resume(),gameState.unselect(),n.updateGameState(gameState)})),G()(L()(n),"toggleAISettingsMenu",(function(e){n.setState({aiSettingsOpened:e,settingsOpened:!1}),e?gameState.pause():gameState.resume(),gameState.unselect(),n.updateGameState(gameState)})),G()(L()(n),"exportGame",(function(){var e="chess-".concat(gameState.gameId,"-").concat(T()().format("YYYY-MM-DD-HH-mm-ss")),t=prompt("Enter a name for your saved game.",e);if(t){var n=gameState.export(),r=new Blob([n],{type:"application/json"}),a=document.createElement("a");a.download=t,a.href=URL.createObjectURL(r),a.click()}})),G()(L()(n),"handleImportGame",(function(){document.getElementById("load-file-input").click()})),G()(L()(n),"importGame",function(){var e=v()(g.a.mark((function e(t){var r,a;return g.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=t.target.files[0],e.next=3,r.text();case 3:a=e.sent,gameState.import(a),n.updateGameState(gameState);case 6:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()),G()(L()(n),"renderPieceIcon",(function(e){var t=e.type,n=e.player;if(!t)return null;var r=be[t];return r?s.a.createElement(He,{title:t},s.a.createElement(r,{color1:n?"black":"white",color2:n?"white":"black"})):t})),G()(L()(n),"renderGameStats",(function(){var e=n.state.gameState;return s.a.createElement(Ce,null,s.a.createElement(Le,null,"#",String(e.currentTurn+1),":"),s.a.createElement(Pe,{player:e.currentPlayer},e.currentPlayer?"Black":"White"),s.a.createElement(Me,null,e.totalTimePlayed.format("hh:mm:ss",{trim:!1})),s.a.createElement(Ie,{open:n.state.settingsOpened,onClick:function(){return n.toggleSettingsMenu(!n.state.settingsOpened)}},"âš™ï¸"),n.state.gameState.artificialIntelligenceStatus.initialized&&s.a.createElement(Ie,{open:n.state.aiSettingsOpened,onClick:function(){return n.toggleAISettingsMenu(!n.state.aiSettingsOpened)}},"ðŸ¤–"))})),G()(L()(n),"renderSettingsMenu",(function(){return n.state.settingsOpened?s.a.createElement("div",null,s.a.createElement(Ge,null,s.a.createElement(Te,null,q.map((function(e,t){return s.a.createElement(_e,{key:e,onClick:function(){n.state.gameState.togglePlayerControl(t),n.updateGameState(n.state.gameState)}},s.a.createElement("span",null,e,":")," ",n.state.gameState.players[t].control)})),s.a.createElement(_e,null,s.a.createElement("span",null,"Time limit:")," None"),s.a.createElement(_e,null,s.a.createElement("span",null,"Offline mode:")," Disabled"),s.a.createElement(_e,{onClick:n.exportGame},s.a.createElement("span",null,"Save:")," >>"),s.a.createElement(_e,{onClick:n.handleImportGame},s.a.createElement("span",null,"Load:")," <<"))),s.a.createElement(Ue,{onChange:n.importGame})):null})),G()(L()(n),"renderAISettingsMenu",(function(){if(n.state.gameState.artificialIntelligenceStatus.initialized)return n.state.aiSettingsOpened?s.a.createElement("div",null,s.a.createElement(Ae,null,s.a.createElement(Ne,null,gameState.aiOptions.map((function(e){var t=e.name,r=e.value,a=e.type,i=s.a.createElement("span",null,t,":"),o=String(r);switch(a){default:break;case"button":i=s.a.createElement("span",null,t),o=null;break;case"check":o=s.a.createElement("span",{onClick:function(){n.state.gameState.setArtificialIntelligenceOption({name:t,value:!r})}},String(r))}return s.a.createElement(_e,{key:t},i,o)}))))):null})),G()(L()(n),"renderGraveyard",(function(e){return n.state.gameState.removedPieces[e].map((function(e){return s.a.createElement(Be,{key:e.id},n.renderPieceIcon(e))}))})),G()(L()(n),"renderSquares",(function(){for(var e=n.state.gameState,t=[],r=0;r<=9;r++)for(var a=0;a<=9;a++)0===a&&0===r||9===a&&9===r||9===a&&0===r||0===a&&9===r?t.push(s.a.createElement(Ke,{key:"".concat(a,"-").concat(r)})):0===a?t.push(s.a.createElement(Ke,{key:"".concat(a,"-").concat(r),border:"right"},9-r)):9===a?t.push(s.a.createElement(Ke,{key:"".concat(a,"-").concat(r),border:"left"},9-r)):0===r?t.push(s.a.createElement(Ke,{key:"".concat(a,"-").concat(r),border:"bottom"},String.fromCharCode(96+a))):9===r?t.push(s.a.createElement(Ke,{key:"".concat(a,"-").concat(r),border:"top"},String.fromCharCode(96+a))):function(){var i=a-1,o=r-1,c=e.getPieceAt({x:i,y:o});t.push(s.a.createElement(Re,{key:"".concat(a,"-").concat(r),even:(a+r)%2==0,player:c&&c.player,onClick:function(){return n.handleSelect({x:i,y:o,piece:c})},selected:e.isSelectedSquare({x:i,y:o})},n.renderPieceIcon(xe({},c))))}();return t})),G()(L()(n),"renderLog",(function(){if(n.state.gameState.log.length)return s.a.createElement(Fe,null,n.state.gameState.log.map((function(e){var t=e.id,r=e.string,a=e.piece,i=e.player,o=e.endGame;return s.a.createElement(Ye,{key:t},s.a.createElement(We,null,n.renderPieceIcon(xe({},a,{player:i}))),r,o&&"X")})))}));var r=new ke;if(e.gameData)r.import(e.gameData),r.resume(),n.props.history.replace("/game/".concat(r.gameId));else if(e.location.newGame||e.gameId)e.location.newGame&&e.gameId&&r.newGame(e.gameId);else{var a=Object(z.a)();n.props.history.replace({pathname:"/game/".concat(a),newGame:!0})}n.state={gameState:r,settingsOpened:!1,aiSettingsOpened:!1},window.gameState=r;var i=ae(),o=i.name,c=i.version,l=i.repository,u=i.author;return console.log("".concat(o," v").concat(c," by ").concat(u)),console.log("repository: ".concat(l)),n}return M()(t,e),w()(t,[{key:"componentDidMount",value:function(){var e=this,t=!1;setInterval((function(){if(e.state.gameState.gameEndedAt)t||(t=!0,e.updateGameState(gameState));else{var n=e.state.gameState;n.updateTimePlayed(),e.updateGameState(n)}}),1e3)}},{key:"componentDidUpdate",value:function(e){if(e.data&&e.data.loading&&!this.props.data.loading)if(this.props.data.repository&&this.props.data.repository.object){var t=JSON.parse(this.props.data.repository.object.text);console.log(t),gameState.import(t),gameState.resume(),this.setState({gameState:gameState})}else{console.error("Game not found. New game created instead.");var n=Object(z.a)();gameState.newGame(n),this.props.history.replace({pathname:"/game/".concat(n),newGame:!0})}}},{key:"render",value:function(){return s.a.createElement(Oe,null,this.renderGameStats(),this.renderSettingsMenu(),this.renderAISettingsMenu(),s.a.createElement(De,null,s.a.createElement(ze,null,this.renderGraveyard(0)),s.a.createElement(Ve,null,this.renderSquares()),s.a.createElement(ze,null,this.renderGraveyard(1)),this.renderLog()))}}]),t}(o.Component),Se=Object(D.a)(_()(je()),{skip:function(e){return e.location.newGame||e.gameData||!e.gameId},options:function(e){return{variables:{expression:"master:".concat(e.gameId,".json")}}}})(Ee),Oe=d.c.div.withConfig({displayName:"GameView__View",componentId:"sc-1r250k0-0"})(["display:flex;justify-content:center;flex-direction:column;align-items:center;min-height:100vh;user-select:none;color:",";"],(function(e){return e.theme.color1})),Ce=d.c.div.withConfig({displayName:"GameView__GameStats",componentId:"sc-1r250k0-1"})(["display:flex;justify-content:center;align-items:center;text-align:center;flex-wrap:wrap;margin:10px;padding:10px;border-radius:5px;background:",";color:",";min-height:40px;box-sizing:border-box;font-size:18px;"],(function(e){return e.theme.background2}),(function(e){return e.theme.color2})),Le=d.c.div.withConfig({displayName:"GameView__CurrentTurn",componentId:"sc-1r250k0-2"})(["margin-right:2px;"]),Pe=d.c.div.withConfig({displayName:"GameView__CurrentPlayer",componentId:"sc-1r250k0-3"})(["text-transform:uppercase;font-weight:bold;color:",";width:60px;margin-right:20px;"],(function(e){return e.player?"black":"white"})),Me=d.c.div.withConfig({displayName:"GameView__TimePlayed",componentId:"sc-1r250k0-4"})([""]),Ie=d.c.div.withConfig({displayName:"GameView__OpenSettings",componentId:"sc-1r250k0-5"})(["font-size:14px;margin-left:10px;box-sizing:border-box;",";"],(function(e){return e.open&&"\n        margin: -1px;\n        margin-left: 9px;\n        border: 1px inset white;\n        "})),Ge=d.c.div.withConfig({displayName:"GameView__SettingsMenuAnchor",componentId:"sc-1r250k0-6"})(["margin-left:-60px;"]),Ae=d.c.div.withConfig({displayName:"GameView__AISettingsMenuAnchor",componentId:"sc-1r250k0-7"})(["margin-left:-120px;"]),Te=d.c.div.withConfig({displayName:"GameView__SettingsMenu",componentId:"sc-1r250k0-8"})(["width:160px;position:absolute;margin-top:-10px;padding:10px;background:",";color:",";border:1px solid black;"],(function(e){return e.theme.background2}),(function(e){return e.theme.color2})),Ne=Object(d.c)(Te).withConfig({displayName:"GameView__AISettingsMenu",componentId:"sc-1r250k0-9"})(["width:220px;"]),_e=d.c.div.withConfig({displayName:"GameView__SettingsItem",componentId:"sc-1r250k0-10"})(["display:flex;justify-content:space-between;text-transform:capitalize;"]),De=d.c.div.withConfig({displayName:"GameView__Wrapper",componentId:"sc-1r250k0-11"})(["display:flex;flex-direction:column;align-items:center;"]),ze=d.c.div.withConfig({displayName:"GameView__Graveyard",componentId:"sc-1r250k0-12"})(["width:95%;display:flex;flex-wrap:wrap;min-height:4vw;background:rgb(118,118,118);padding:1vh;border:1px solid black;@media screen and (orientation:landscape){min-height:4vh;}"]),Be=d.c.div.withConfig({displayName:"GameView__Tomb",componentId:"sc-1r250k0-13"})(["width:4vw;@media screen and (orientation:landscape){width:4vh;}"]),Ve=d.c.div.withConfig({displayName:"GameView__Board",componentId:"sc-1r250k0-14"})(["display:grid;grid-template:repeat(10,calc(80vw / 10)) / repeat(10,calc(80vw / 10));@media screen and (orientation:landscape){grid-template:repeat(10,calc((80vh - 5rem) / 10)) / repeat(10,calc((80vh - 5rem) / 10));}"]),Re=d.c.div.withConfig({displayName:"GameView__Square",componentId:"sc-1r250k0-15"})(["background:",";color:",";text-shadow:0 0 2px ",";display:flex;justify-content:center;align-items:center;overflow:hidden;"],(function(e){return e.selected?"green":e.even?e.theme.evenSquareBackground:e.theme.oddSquareBackground}),(function(e){return e.player?"black":"white"}),(function(e){return e.player?"white":"black"})),Ke=d.c.div.withConfig({displayName:"GameView__Side",componentId:"sc-1r250k0-16"})(["display:flex;justify-content:center;align-items:center;"," font-size:14px;"],(function(e){return e.border?"border-".concat(e.border,": 1px solid black;"):null})),He=d.c.div.withConfig({displayName:"GameView__IconContainer",componentId:"sc-1r250k0-17"})(["svg{width:100%;height:100%;}"]),Ue=d.c.input.attrs({type:"file",id:"load-file-input"}).withConfig({displayName:"GameView__HiddenFileLoader",componentId:"sc-1r250k0-18"})(["display:none;"]),Fe=d.c.div.withConfig({displayName:"GameView__Log",componentId:"sc-1r250k0-19"})(["margin-top:4rem;margin-bottom:4rem;width:95%;display:flex;flex-wrap:wrap;flex-direction:column;align-items:space-between;background:rgb(118,118,118);padding:10px;border:1px solid black;max-height:35vh;@media screen and (orientation:landscape){max-height:35vw;}"]),Ye=d.c.div.withConfig({displayName:"GameView__LogEntry",componentId:"sc-1r250k0-20"})(["display:flex;align-items:center;padding:0.05rem;"]),We=d.c.div.withConfig({displayName:"GameView__LogIconContainer",componentId:"sc-1r250k0-21"})(["width:2.75vh;"]);function qe(){var e=i()(["\n    body {\n        margin: 0;\n        background: ",";\n    }\n"]);return qe=function(){return e},e}var Xe="localhost"===location.hostname,Je=new p.a({uri:"https://api.github.com/graphql",request:function(e){e.setContext({headers:{authorization:"Bearer ".concat(Xe&&"undefined"!=typeof DEBUG_TOKEN?DEBUG_TOKEN:"YOUR_GITHUB_TOKEN")}})}}),$e=Object(d.b)(qe(),(function(e){return e.theme.background1}));l.a.render(s.a.createElement(f.b,{client:Je},s.a.createElement(d.a,{theme:{name:"dark",evenSquareBackground:"rgb(210, 210, 210)",oddSquareBackground:"rgb(150, 150, 150)",background1:"rgb(40, 40, 40)",background2:"rgb(118, 118, 118)",color1:"rgb(210, 210, 210)",color2:"rgb(250, 250, 250)"}},s.a.createElement("div",null,s.a.createElement($e,null),s.a.createElement(m.a,null,s.a.createElement(u.c,null,s.a.createElement(u.a,{exact:!0,path:"/game",component:function(e){return s.a.createElement(Se,{gameData:Xe&&"undefined"!=typeof DEBUG_GAME&&DEBUG_GAME,history:e.history,location:e.location})}}),s.a.createElement(u.a,{exact:!0,path:"/game/new",component:function(e){return s.a.createElement(Se,{gameData:Xe&&"undefined"!=typeof DEBUG_GAME&&DEBUG_GAME,history:e.history,location:e.location})}}),s.a.createElement(u.a,{exact:!0,path:"/game/:gameId",component:function(e){return s.a.createElement(Se,{gameData:Xe&&"undefined"!=typeof DEBUG_GAME&&DEBUG_GAME,gameId:e.match.params.gameId,history:e.history,location:e.location})}})))))),document.getElementById("app"))},28:function(e){e.exports=JSON.parse('{"b":"chess","d":"0.1.3","a":"Yves Gurcan","c":{"type":"git","url":"https://github.com/yvesgurcan/chess"}}')}},[[209,1,2]]]);